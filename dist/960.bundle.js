"use strict";(self.webpackChunkvue_prueba_tecnica=self.webpackChunkvue_prueba_tecnica||[]).push([[960],{2960:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-container",[r("v-dialog",{attrs:{width:"500"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[r("v-card",[r("v-card-title",{staticClass:"text-h5 grey lighten-2"},[e._v("\n                Cliente\n            ")]),e._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-layout",{attrs:{row:"",wrap:"","mb-3":"","pt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:e.required,label:"CC.."},model:{value:e.customer.cc,callback:function(t){e.$set(e.customer,"cc",t)},expression:"customer.cc"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail.."},model:{value:e.customer.email,callback:function(t){e.$set(e.customer,"email",t)},expression:"customer.email"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:e.required,label:"Nombre.."},model:{value:e.customer.name,callback:function(t){e.$set(e.customer,"name",t)},expression:"customer.name"}})],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{color:"red"},on:{click:function(t){return e.closeModal()}}},[e._v("\n                    Cerrar\n                ")]),e._v(" "),r("v-btn",{attrs:{color:"success"},on:{click:function(t){null==e.customer.id?e.saveCustomer():e.modifyCustomer()}}},[e._v("\n                    "+e._s(null==e.customer.id?"Guardar":"Actualizar")+"\n                ")])],1)],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("h2",[e._v("Clientes")])])],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:"","justify-space-between":!0}},[r("v-flex",{attrs:{xs12:"",md9:""}},[r("v-text-field",{attrs:{label:"Buscar..."},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCustomers()}},model:{value:e.searcher,callback:function(t){e.searcher=t},expression:"searcher"}})],1),e._v(" "),r("v-flex",{staticClass:"mt-3",attrs:{xs12:"",md1:""}},[r("v-btn",{attrs:{color:"primary",block:""},on:{click:function(t){return e.getCustomers()}}},[r("v-icon",[e._v("\n                        search\n                    ")])],1)],1),e._v(" "),r("v-flex",{staticClass:"mt-3 ",attrs:{xs12:"",md1:""}},[r("v-btn",{attrs:{color:"success",block:""},on:{click:function(t){return e.addCustomer()}}},[r("v-icon",[e._v("\n                        mdi-plus\n                    ")])],1)],1),e._v(" "),1==e.loading?r("v-flex",{staticClass:"card-flex mt-3",attrs:{xs12:""}},[r("v-progress-linear",{attrs:{color:"success",indeterminate:"",rounded:"",height:"6"}})],1):r("v-flex",{attrs:{xs12:""}},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.customers},scopedSlots:e._u([{key:"item.action",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{row:"",warp:""}},[r("v-flex",[r("v-btn",{staticClass:"white--text",attrs:{fab:"","x-small":"",color:"orange"},on:{click:function(t){return e.updateCustomer(a)}}},[r("v-icon",[e._v("\n                                    mdi-pencil\n                                ")])],1),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{fab:"","x-small":"",color:"red"},on:{click:function(t){return e.removeCustomer(a)}}},[r("v-icon",[e._v("\n                                    remove\n                                ")])],1)],1)],1)]}}])})],1)],1)],1)],1)};function n(e,t,r,a,n,s,o){try{var c=e[s](o),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(a,n)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(a,s){var o=e.apply(t,r);function c(e){n(o,a,s,c,i,"next",e)}function i(e){n(o,a,s,c,i,"throw",e)}c(void 0)}))}}a._withStripped=!0;const o={data:function(){return{modal:!1,customers:[],customer:{id:null,cc:null,name:null,email:null},headers:[{text:"",value:"action"},{text:"CC",value:"cc"},{text:"Nombre",value:"name"},{text:"E-mail",value:"email"}],required:[function(e){return!!e||"Este campo es requerido"}],emailRules:[function(e){return!!e||"Este campo es requerido"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"Ingrese un correo valido"}],loading:!1,searcher:"",url_api:"https://app-prueba-finesa-backend.herokuapp.com/api/customers"}},mounted:function(){this.getCustomers()},methods:{addCustomer:function(){this.modal=!0,this.resetCustomer()},closeModal:function(){this.modal=!1,this.resetCustomer()},resetCustomer:function(){this.customer.id=null,this.customer.cc=null,this.customer.name=null,this.customer.email=null},getCustomers:function(){var e=this;return s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.axios.get(e.url_api,{params:{search:e.searcher}}).then((function(t){e.customers=t.data.customers,e.loading=!1})).catch((function(t){e.loading=!1,e.$swal("Error",t.response.data,"error")}));case 3:case"end":return t.stop()}}),t,this)})))()},saveCustomer:function(){var e=this;return s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,e.$refs.form.validate()){t.next=4;break}return e.loading=!1,t.abrupt("return",!1);case 4:return t.next=6,e.axios.post(e.url_api,e.customer).then((function(t){e.getCustomers(),e.closeModal(),e.$swal("Correcto",t.data,"success"),e.loading=!1})).catch((function(t){e.loading=!1,e.$swal("Error",t.response.data,"error")}));case 6:case"end":return t.stop()}}),t,this)})))()},updateCustomer:function(e){this.customer.id=e.id,this.customer.cc=e.cc,this.customer.email=e.email,this.customer.name=e.name,this.modal=!0},modifyCustomer:function(){var e=this;return s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,e.$refs.form.validate()){t.next=4;break}return e.loading=!1,t.abrupt("return",!1);case 4:return t.next=6,e.axios.put(e.url_api+"/"+e.customer.id,e.customer).then((function(t){e.closeModal(),e.getCustomers(),e.$swal("Correcto",t.data,"success"),e.loading=!1})).catch((function(t){e.loading=!1,e.$swal("Error",t.response.data,"error")}));case 6:case"end":return t.stop()}}),t,this)})))()},removeCustomer:function(e){var t=this;return s(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,t.axios.delete(t.url_api+"/"+e.id).then((function(e){t.getCustomers(),t.$swal("Correcto",e.data,"success"),t.loading=!1})).catch((function(e){t.loading=!1,t.$swal("Error",e.response.data,"error")}));case 3:case"end":return r.stop()}}),r,this)})))()}}};var c=r(51900),i=r(43453),u=r.n(i),l=r(55934),m=r(85893),d=r(5255),v=r(66530),f=r(78577),p=r(71463),h=r(60683),x=r(83240),C=r(4786),g=r(59456),w=r(56267),_=r(22515),b=r(65191),k=(0,c.Z)(o,a,[],!1,null,null,null);u()(k,{VBtn:l.Z,VCard:m.Z,VCardActions:d.h7,VCardText:d.ZB,VCardTitle:d.EB,VContainer:v.Z,VDataTable:f.Z,VDialog:p.Z,VFlex:h.Z,VForm:x.Z,VIcon:C.Z,VLayout:g.Z,VProgressLinear:w.Z,VSpacer:_.Z,VTextField:b.Z}),k.options.__file="src/views/customers.vue";const y=k.exports}}]);