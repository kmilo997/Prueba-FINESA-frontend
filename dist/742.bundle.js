"use strict";(self.webpackChunkvue_prueba_tecnica=self.webpackChunkvue_prueba_tecnica||[]).push([[742],{49742:(t,r,a)=>{a.r(r),a.d(r,{default:()=>V});var e=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",[a("v-container",[a("v-dialog",{attrs:{width:"500"},model:{value:t.modal,callback:function(r){t.modal=r},expression:"modal"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 grey lighten-2"},[t._v("\n                        Categoria\n                    ")]),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-layout",{attrs:{row:"",wrap:"","mb-3":"","pt-3":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:t.requerido,label:"Nombre.."},model:{value:t.categoria.nombre,callback:function(r){t.$set(t.categoria,"nombre",r)},expression:"categoria.nombre"}})],1)],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"red"},on:{click:function(r){return t.cerrarModal()}}},[t._v("\n                            Cerrar\n                        ")]),t._v(" "),a("v-btn",{attrs:{color:"success"},on:{click:function(r){null==t.categoria.id?t.guardarItem():t.actualizarItem()}}},[t._v("\n                            "+t._s(null==t.categoria.id?"Guardar":"Actualizar")+"\n                        ")])],1)],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",[t._v("Categorias")])])],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:"","justify-space-between":!0}},[a("v-flex",{attrs:{xs12:"",md9:""}},[a("v-text-field",{attrs:{label:"Buscar..."},on:{keyup:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.getData()}},model:{value:t.buscador,callback:function(r){t.buscador=r},expression:"buscador"}})],1),t._v(" "),a("v-flex",{staticClass:"mt-3",attrs:{xs12:"",md1:""}},[a("v-btn",{attrs:{color:"primary",block:""},on:{click:function(r){return t.getData()}}},[a("v-icon",[t._v("\n                        search\n                    ")])],1)],1),t._v(" "),a("v-flex",{staticClass:"mt-3 ",attrs:{xs12:"",md1:""}},[a("v-btn",{attrs:{color:"success",block:""},on:{click:function(r){return t.agregar()}}},[a("v-icon",[t._v("\n                        mdi-plus\n                    ")])],1)],1),t._v(" "),1==t.cargando?a("v-flex",{staticClass:"card-flex mt-3",attrs:{xs12:""}},[a("v-progress-linear",{attrs:{color:"success",indeterminate:"",rounded:"",height:"6"}})],1):a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.categorias},scopedSlots:t._u([{key:"item.action",fn:function(r){var e=r.item;return[a("v-layout",{attrs:{row:"",warp:""}},[a("v-flex",[a("v-btn",{staticClass:"white--text",attrs:{fab:"","x-small":"",color:"orange"},on:{click:function(r){return t.editarItem(e)}}},[a("v-icon",[t._v("\n                                    mdi-pencil\n                                ")])],1),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{fab:"","x-small":"",color:"red"},on:{click:function(r){return t.eliminarItem(e)}}},[a("v-icon",[t._v("\n                                    remove\n                                ")])],1)],1)],1)]}}])})],1)],1)],1)],1)};function n(t,r,a,e,n,o,c){try{var i=t[o](c),s=i.value}catch(t){return void a(t)}i.done?r(s):Promise.resolve(s).then(e,n)}function o(t){return function(){var r=this,a=arguments;return new Promise((function(e,o){var c=t.apply(r,a);function i(t){n(c,e,o,i,s,"next",t)}function s(t){n(c,e,o,i,s,"throw",t)}i(void 0)}))}}e._withStripped=!0;const c={data:function(){return{modal:!1,categorias:[],categoria:{id:null,nombre:""},headers:[{text:"Acciones",value:"action"},{text:"Nombre",value:"nombre"}],requerido:[function(t){return!!t||"Este campo es requerido"}],url_api:"https://app-opper-backend.herokuapp.com/api/categorias",cargando:!1,buscador:""}},mounted:function(){this.getData()},methods:{agregar:function(){this.modal=!0,this.resetItem()},cerrarModal:function(){this.modal=!1,this.resetItem()},resetItem:function(){this.categoria.id=null,this.categoria.nombre=""},getData:function(){var t=this;return o(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.cargando=!0,r.next=3,t.axios.get(t.url_api,{params:{search:t.buscador}}).then((function(r){t.categorias=r.data.categorias,t.cargando=!1})).catch((function(r){t.cargando=!1,t.$swal("Error",r,"error")}));case 3:case"end":return r.stop()}}),r,this)})))()},guardarItem:function(){var t=this;return o(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.cargando=!0,t.$refs.form.validate()){r.next=4;break}return t.cargando=!1,r.abrupt("return",!1);case 4:return r.next=6,t.axios.post(t.url_api,t.categoria).then((function(r){t.getData(),t.cerrarModal(),t.$swal("Correcto",r.data,"success"),t.cargando=!1})).catch((function(r){var a=r;try{var e=r.response.data;Object.keys(e).forEach((function(t){e[t].forEach((function(t){a=a+": "+t}))}))}catch(t){a=r.response.data.error}t.$swal("Error",r,"error"),t.cargando=!1}));case 6:case"end":return r.stop()}}),r,this)})))()},editarItem:function(t){this.categoria.id=t.id,this.categoria.nombre=t.nombre,this.modal=!0},actualizarItem:function(){var t=this;return o(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.cargando=!0,t.$refs.form.validate()){r.next=4;break}return t.cargando=!1,r.abrupt("return",!1);case 4:return r.next=6,t.axios.put(t.url_api+"/"+t.categoria.id,t.categoria).then((function(r){t.cerrarModal(),t.getData(),t.$swal("Correcto",r.data,"success"),t.cargando=!1})).catch((function(r){var a="";try{a=r.response.data.error}catch(t){}try{Object.keys("").forEach((function(t){""[t].forEach((function(t){a=a+": "+t}))}))}catch(t){}t.cargando=!1,t.$swal("Error","".concat(a),"error")}));case 6:case"end":return r.stop()}}),r,this)})))()},eliminarItem:function(t){var r=this;return o(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.cargando=!0,a.next=3,r.axios.delete(r.url_api+"/"+t.id).then((function(t){r.getData(),r.$swal("Correcto",t.data,"success"),r.cargando=!1})).catch((function(t){var a="",e=t.response.data;Object.keys(e).forEach((function(t){e[t].forEach((function(t){a=a+": "+t}))})),r.$swal("Error",t,"error"),r.cargando=!1}));case 3:case"end":return a.stop()}}),a,this)})))()}}};var i=a(51900),s=a(43453),u=a.n(s),l=a(55934),d=a(85893),v=a(5255),f=a(66530),m=a(61294),g=a(71463),h=a(18176),p=a(60683),x=a(83240),b=a(4786),_=a(59456),w=a(56267),k=a(22515),y=a(65191),C=(0,i.Z)(c,e,[],!1,null,null,null);u()(C,{VBtn:l.Z,VCard:d.Z,VCardActions:v.h7,VCardText:v.ZB,VCardTitle:v.EB,VContainer:f.Z,VDataTable:m.Z,VDialog:g.Z,VDivider:h.Z,VFlex:p.Z,VForm:x.Z,VIcon:b.Z,VLayout:_.Z,VProgressLinear:w.Z,VSpacer:k.Z,VTextField:y.Z}),C.options.__file="src/views/categorias.vue";const V=C.exports}}]);