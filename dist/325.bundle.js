"use strict";(self.webpackChunkvue_prueba_tecnica=self.webpackChunkvue_prueba_tecnica||[]).push([[325],{50325:(t,e,r)=>{r.r(e),r.d(e,{default:()=>E});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-container",[r("v-dialog",{attrs:{width:"500"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("v-card",[r("v-card-title",{staticClass:"text-h5 grey lighten-2"},[t._v("\n                        Post\n                    ")]),t._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-layout",{attrs:{row:"",wrap:"","mb-3":"","pt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-autocomplete",{attrs:{items:t.categorias,"item-value":"id","item-text":"nombre",rules:t.requerido,label:"Categoria.."},model:{value:t.post.categorias_id,callback:function(e){t.$set(t.post,"categorias_id",e)},expression:"post.categorias_id"}})],1),t._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.requerido,label:"Titulo.."},model:{value:t.post.titulo,callback:function(e){t.$set(t.post,"titulo",e)},expression:"post.titulo"}})],1),t._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-textarea",{attrs:{rows:6,rules:t.requerido,label:"contenido.."},model:{value:t.post.contenido,callback:function(e){t.$set(t.post,"contenido",e)},expression:"post.contenido"}})],1)],1)],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"white--text",attrs:{color:"red"},on:{click:function(e){return t.cerrarModal()}}},[t._v("\n                            Cerrar\n                        ")]),t._v(" "),r("v-btn",{attrs:{color:"success"},on:{click:function(e){null==t.post.id?t.guardarItem():t.actualizarItem()}}},[t._v("\n                            "+t._s(null==t.post.id?"Guardar":"Actualizar")+"\n                        ")])],1)],1)],1),t._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("h2",[t._v("Posts")])])],1),t._v(" "),r("v-layout",{attrs:{row:"",wrap:"","justify-space-between":!0}},[r("v-flex",{attrs:{xs12:"",md9:""}},[r("v-text-field",{attrs:{label:"Buscar..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getData()}},model:{value:t.buscador,callback:function(e){t.buscador=e},expression:"buscador"}})],1),t._v(" "),r("v-flex",{staticClass:"mt-3",attrs:{xs12:"",md1:""}},[r("v-btn",{attrs:{color:"primary",block:""},on:{click:function(e){return t.getData()}}},[r("v-icon",[t._v("\n                        search\n                    ")])],1)],1),t._v(" "),r("v-flex",{staticClass:"mt-3 ",attrs:{xs12:"",md1:""}},[r("v-btn",{attrs:{color:"success",block:""},on:{click:function(e){return t.agregar()}}},[r("v-icon",[t._v("\n                        mdi-plus\n                    ")])],1)],1),t._v(" "),1==t.cargando?r("v-flex",{staticClass:"card-flex mt-3",attrs:{xs12:""}},[r("v-progress-linear",{attrs:{color:"success",indeterminate:"",rounded:"",height:"6"}})],1):r("v-flex",{attrs:{xs12:""}},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.posts},scopedSlots:t._u([{key:"item.action",fn:function(e){var a=e.item;return[r("v-layout",{attrs:{row:"",warp:""}},[r("v-flex",[r("v-btn",{staticClass:"white--text",attrs:{fab:"","x-small":"",color:"orange"},on:{click:function(e){return t.editarItem(a)}}},[r("v-icon",[t._v("\n                                    mdi-pencil\n                                ")])],1),t._v(" "),r("v-btn",{staticClass:"white--text",attrs:{fab:"","x-small":"",color:"red"},on:{click:function(e){return t.eliminarItem(a)}}},[r("v-icon",[t._v("\n                                    remove\n                                ")])],1)],1)],1)]}}])})],1)],1)],1)],1)};function o(t,e,r,a,o,n,s){try{var c=t[n](s),i=c.value}catch(t){return void r(t)}c.done?e(i):Promise.resolve(i).then(a,o)}function n(t){return function(){var e=this,r=arguments;return new Promise((function(a,n){var s=t.apply(e,r);function c(t){o(s,a,n,c,i,"next",t)}function i(t){o(s,a,n,c,i,"throw",t)}c(void 0)}))}}a._withStripped=!0;const s={data:function(){return{modal:!1,posts:[],categorias:[],post:{id:null,categorias_id:null,titulo:"",contenido:""},headers:[{text:"Acciones",value:"action"},{text:"Categoria",value:"categoria"},{text:"Titulo",value:"titulo"},{text:"Contenido",value:"contenido"}],requerido:[function(t){return!!t||"Este campo es requerido"}],url_api:"https://app-opper-backend.herokuapp.com/api/posts",url_api_categorias:"https://app-opper-backend.herokuapp.com/api/categorias",cargando:!1,buscador:""}},mounted:function(){this.getData(),this.getCategorias()},methods:{agregar:function(){this.modal=!0,this.resetItem()},cerrarModal:function(){this.modal=!1,this.resetItem()},resetItem:function(){this.post.id=null,this.post.categorias_id=null,this.post.titulo="",this.post.contenido=""},getData:function(){var t=this;return n(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.cargando=!0,e.next=3,t.axios.get(t.url_api,{params:{search:t.buscador}}).then((function(e){t.posts=e.data.posts,t.cargando=!1})).catch((function(e){t.cargando=!1,t.$swal("Error",e,"error")}));case 3:case"end":return e.stop()}}),e,this)})))()},getCategorias:function(){var t=this;return n(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.cargando=!0,e.next=3,t.axios.get(t.url_api_categorias,{params:{search:t.buscador}}).then((function(e){t.categorias=e.data.categorias,t.cargando=!1})).catch((function(e){t.cargando=!1,t.$swal("Error",e,"error")}));case 3:case"end":return e.stop()}}),e,this)})))()},guardarItem:function(){var t=this;return n(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cargando=!0,t.$refs.form.validate()){e.next=4;break}return t.cargando=!1,e.abrupt("return",!1);case 4:return e.next=6,t.axios.post(t.url_api,t.post).then((function(e){t.getData(),t.cerrarModal(),t.$swal("Correcto",e.data,"success"),t.cargando=!1})).catch((function(e){var r=e;try{var a=e.response.data;Object.keys(a).forEach((function(t){a[t].forEach((function(t){r=r+": "+t}))}))}catch(t){r=e.response.data.error}t.$swal("Error",r,"error"),t.cargando=!1}));case 6:case"end":return e.stop()}}),e,this)})))()},editarItem:function(t){this.post.id=t.id,this.post.titulo=t.titulo,this.post.categorias_id=t.id_categoria,this.post.contenido=t.contenido,this.modal=!0},actualizarItem:function(){var t=this;return n(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cargando=!0,t.$refs.form.validate()){e.next=4;break}return t.cargando=!1,e.abrupt("return",!1);case 4:return console.log("this.post",t.post),e.next=7,t.axios.put(t.url_api+"/"+t.post.id,t.post).then((function(e){t.cerrarModal(),t.getData(),t.$swal("Correcto",e.data,"success"),t.cargando=!1})).catch((function(e){var r="";try{r=e.response.data.error}catch(t){}console.log("err.response.data",e);try{Object.keys("").forEach((function(t){""[t].forEach((function(t){r=r+": "+t}))}))}catch(t){}console.log("mensaje",r),t.cargando=!1,t.$swal("Error","".concat(r),"error")}));case 7:case"end":return e.stop()}}),e,this)})))()},eliminarItem:function(t){var e=this;return n(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.cargando=!0,r.next=3,e.axios.delete(e.url_api+"/"+t.id).then((function(t){e.getData(),e.$swal("Correcto",t.data,"success"),e.cargando=!1})).catch((function(t){var r="",a=t.response.data;Object.keys(a).forEach((function(t){a[t].forEach((function(t){r=r+": "+t}))})),e.$swal("Error",t,"error"),e.cargando=!1}));case 3:case"end":return r.stop()}}),r,this)})))()}}};var c=r(51900),i=r(43453),u=r.n(i),l=r(67416),d=r(55934),p=r(85893),v=r(5255),f=r(66530),h=r(61294),m=r(71463),g=r(18176),x=r(60683),_=r(83240),b=r(4786),w=r(59456),k=r(56267),C=r(22515),y=r(65191),V=r(39225),Z=(0,c.Z)(s,a,[],!1,null,null,null);u()(Z,{VAutocomplete:l.Z,VBtn:d.Z,VCard:p.Z,VCardActions:v.h7,VCardText:v.ZB,VCardTitle:v.EB,VContainer:f.Z,VDataTable:h.Z,VDialog:m.Z,VDivider:g.Z,VFlex:x.Z,VForm:_.Z,VIcon:b.Z,VLayout:w.Z,VProgressLinear:k.Z,VSpacer:C.Z,VTextField:y.Z,VTextarea:V.Z}),Z.options.__file="src/views/posts.vue";const E=Z.exports}}]);